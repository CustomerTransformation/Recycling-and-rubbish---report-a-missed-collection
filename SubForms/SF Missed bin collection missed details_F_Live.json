{
  "formName": "SF Missed bin collection missed details",
  "formDescription": "",
  "props": {
    "id": "AF-Form-b2626ae9-766f-462e-988d-f83d474008f8",
    "category": "AF-Category-a53c2287-5a94-4cb0-b53c-86bd138eb03d",
    "saveSubmissionData": true,
    "usePHPIntregration": false,
    "serverSideLookupValidation": false,
    "tags": "",
    "navigateAwayWarning": "Are you sure you want to navigate away? All progress in this form will be lost.",
    "navigateAwayWarn": true,
    "validateOnInit": true,
    "stopOnFailure": false,
    "stickyError": false,
    "showFormReference": false,
    "mustBeValid": true,
    "hideHeader": false,
    "isPublished": false,
    "isSubform": true,
    "integrations": [],
    "notes": false,
    "submission": {
      "message": "<p>Your reference number is {summary_ref}.</p><p>Thank you for submitting {form_name}</p><p>{visiblesummary}</p>",
      "api": "/form/submit/",
      "download": "Download PDF",
      "cancel_redirect": null,
      "continue": "Continue",
      "conditionInputs": "",
      "showDownload": false,
      "showMessage": false,
      "serverSubmit": true,
      "redirect": null,
      "condition": "",
      "printableIntegrationId": "",
      "newPaymentMethod": false
    },
    "save": {
      "lim": "3f07ecf4-0dfa-11e2-b0b9-12313b03ed59",
      "displayCondition": "",
      "conditionInputs": "",
      "redirect": null,
      "allow": false,
      "fromName": "",
      "message": "",
      "subject": "",
      "mail": false,
      "from": "",
      "disableSaveNotify": false
    },
    "hideSaveUrl": false,
    "usePHPIntegrations": true,
    "integrationDefinition": []
  },
  "sections": [
    {
      "url": "Section-1.html",
      "id": "AF-Section-9a14616a-d7cb-4d83-b355-be36cf63f865",
      "props": {
        "hideCancel": false,
        "conditionInputs": "",
        "displayCondition": "",
        "validationInputs": "",
        "validation": "",
        "validationMessage": "This Section is Invalid",
        "validationLookup": {
          "enableLookup": false,
          "lookupID": "",
          "lookupName": "",
          "lookupValidation": "",
          "lookupOperator": ""
        }
      },
      "name": "Section 1",
      "fields": [
        {
          "type": "date",
          "props": {
            "label": "Date from collection days lookup",
            "dataName": "dateLast",
            "labelPosition": "alignLeft",
            "defaultType": "specific",
            "defaultValue": "",
            "helpText": "",
            "hidden": true,
            "readOnly": true,
            "summaryField": false,
            "displayName": true,
            "outerClass": null,
            "labelClass": null,
            "inputClass": null,
            "width": null,
            "hideWhenBlank": null,
            "displayAsSeparated": null,
            "displayCondition": null,
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": false,
            "minimumValue": "",
            "maximumValue": "",
            "dateFormat": "dd/MM/yyyy",
            "mandatoryMessage": "This field is required",
            "minimumValueMessage": "Please input a date no earlier than _min_value_",
            "maximumValueMessage": "Please input a date no later than _max_value_",
            "dateFormatMessage": "Please input a date in the format _date_format_"
          },
          "conditionInputs": [],
          "id": "AF-Field-349ae987-80b7-4307-b818-93f73139d3a2"
        },
        {
          "type": "date",
          "props": {
            "label": "Date of missed collection",
            "dataName": "dateOfMissedCol",
            "labelPosition": "alignLeft",
            "defaultType": "text",
            "defaultValue": "{dateLast}",
            "helpText": "",
            "hidden": false,
            "readOnly": false,
            "summaryField": false,
            "displayName": "true",
            "outerClass": "",
            "labelClass": "",
            "inputClass": "",
            "width": "8",
            "hideWhenBlank": false,
            "displayAsSeparated": false,
            "displayCondition": "",
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": true,
            "minimumValue": "{furthestBack}",
            "maximumValue": "{today}",
            "dateFormat": "dd/MM/yyyy",
            "mandatoryMessage": "This field is required",
            "minimumValueMessage": "Please input a date no earlier than _min_value_",
            "maximumValueMessage": "You can not report a missed collection before the day it is due to be collected",
            "dateFormatMessage": "Please input a date in the format _date_format_"
          },
          "conditionInputs": [],
          "id": "AF-Field-bd5401de-b99c-4e4e-bb30-6a36be566c04"
        },
        {
          "type": "text",
          "props": {
            "label": "check for allow today",
            "dataName": "checkAllowToday",
            "labelPosition": "alignAbove",
            "defaultValue": "if({dateOfMissedCol} > {maxDate}, concat({#Pred}, 'You can not report a missed collection before 3pm on the day of collection, as it may be that our crews are still out working and are on their way to it.', {#PE}), '')",
            "helpText": "",
            "hidden": true,
            "readOnly": true,
            "summaryField": false,
            "displayName": true,
            "outerClass": null,
            "labelClass": null,
            "inputClass": null,
            "outputFormat": "normal",
            "currencyPrefix": null,
            "width": null,
            "inputMask": null,
            "inputMaskPlaceholder": null,
            "lengthCount": null,
            "hideWhenBlank": null,
            "displayCondition": "",
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": false,
            "minimumLength": "",
            "maximumLength": "",
            "validationCondition": "{dateOfMissedCol} <= {maxDate} or {allowReportBefore} = 'yes'",
            "validationMask": "",
            "mandatoryMessage": "This field is required",
            "minimumLengthMessage": "Please input at least _min_value_ characters",
            "maximumLengthMessage": "Please input no more than _max_value_ characters",
            "validationMaskMessage": "Please input text of the format: _validation_mask_",
            "validationConditionMessage": "You can not report a missed collection before 3pm on the day of collection, as it may be that our crews are still out working and are on their way to it",
            "validationMaskMessageValue": "Select..."
          },
          "id": "AF-Field-c2164d16-0637-478e-a884-32f0e8d6d588"
        },
        {
          "type": "checkbox",
          "props": {
            "minimumChoices": "",
            "maximumChoices": "",
            "minimumChoicesMessage": "Please select at least _min_value_ choices",
            "maximumChoicesMessage": "Please select no more than _max_value_ choices",
            "label": "Allow report before 3pm",
            "dataName": "allowReportBefore",
            "labelPosition": "hideLabel",
            "defaultType": "specific",
            "defaultValue": null,
            "defaultValueText": null,
            "listSource": "one-time-list",
            "helpText": "",
            "readOnly": false,
            "allowOther": false,
            "summaryField": false,
            "lookup": null,
            "lookupCondition": null,
            "lookupButton": null,
            "preventRunningOnInitialisation": null,
            "noResultsMessage": null,
            "tokenName": null,
            "listOfValues": [
              {
                "label": "Let me log - I confirm I have checked Biffa.net",
                "value": "yes"
              }
            ],
            "displayName": true,
            "outerClass": null,
            "labelClass": null,
            "inputClass": null,
            "width": null,
            "displayStyle": "vertical",
            "styleAsButton": null,
            "hideWhenBlank": null,
            "hidden": null,
            "displayCondition": "{checkAllowToday} isnt '' and {product} = 'Dash'",
            "selectCondition": null,
            "weAdviseAgainstTheUseOfSelectConditions;PleaseUseDisplayConditionsInstead.": null,
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": false,
            "mandatoryMessage": "This field is required"
          },
          "id": "AF-Field-63315f8f-36f4-443c-bc35-52249b79807b"
        },
        {
          "type": "text",
          "props": {
            "label": "Day of week",
            "dataName": "dayOfWeek",
            "labelPosition": "alignLeft",
            "defaultValue": "dayName({dateOfMissedCol})",
            "helpText": "",
            "hidden": false,
            "readOnly": true,
            "summaryField": false,
            "displayName": true,
            "outerClass": null,
            "labelClass": null,
            "inputClass": null,
            "outputFormat": "normal",
            "currencyPrefix": null,
            "width": null,
            "inputMask": null,
            "inputMaskPlaceholder": null,
            "lengthCount": null,
            "hideWhenBlank": null,
            "displayCondition": null,
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": false,
            "minimumLength": "",
            "maximumLength": "",
            "validationCondition": "",
            "validationMask": "",
            "mandatoryMessage": "This field is required",
            "minimumLengthMessage": "Please input at least _min_value_ characters",
            "maximumLengthMessage": "Please input no more than _max_value_ characters",
            "validationMaskMessage": "Please input text of the format: _validation_mask_",
            "validationConditionMessage": "This field is invalid",
            "validationMaskMessageValue": "Select..."
          },
          "conditionInputs": [],
          "id": "AF-Field-a6617b8a-7ac5-4509-976b-0bf1a82b8cc7"
        },
        {
          "type": "html",
          "props": {
            "label": "html 2",
            "dataName": "html2",
            "displayName": "",
            "outerClass": "",
            "width": "",
            "showInSummary": false,
            "content": "{#checkAllowToday}\n\n<p style=\"color:blue\">Missed collections must be reported within 2 working days. If your collection was missed before that, we will not return until your next scheduled collection day. If you wish to discuss an ongoing issue about your collections, please fill in the <a target=\"_blank\" href=\"https://my.portsmouth.gov.uk/en/AchieveForms/?form_uri=sandbox-publish://AF-Process-2c0dcf98-93e9-446c-9eac-d741edb39fd8/AF-Stage-effd8434-7496-4f9b-9191-83dcac834f50/definition.json&redirectlink=%2Fen&cancelRedirectLink=%2Fen&consentMessage=yes\">general enquiry form</a> or call us on <a target=\"_blank\" href=\"tel:02392841105\">023 9284 1105</a></p>",
            "displayCondition": null
          },
          "conditionInputs": [],
          "id": "AF-Field-f16a14b9-483d-441c-a17d-8d1261cc8100"
        },
        {
          "type": "html",
          "props": {
            "label": "html 1",
            "dataName": "html1",
            "displayName": "",
            "outerClass": "",
            "width": "",
            "showInSummary": false,
            "content": "<p style=\"color:blue\">Please note that collections can take place any time between 07:00 and 16:00 hrs</p>",
            "displayCondition": "{dateOfMissedCol} is {today} and {timeNow} < {timeColEnd}"
          },
          "id": "AF-Field-db76fdd0-53a4-4319-acae-189eafc05419"
        },
        {
          "type": "select",
          "props": {
            "minimumChoices": null,
            "maximumChoices": null,
            "minimumChoicesMessage": "Please select at least _min_value_ choices",
            "maximumChoicesMessage": "Please select no more than _max_value_ choices",
            "label": "Have you had a collection of this type of waste missed in the past six months?",
            "dataName": "prevMissed",
            "labelPosition": "alignLeft",
            "defaultType": "specific",
            "defaultValue": null,
            "defaultValueText": null,
            "listSource": "one-time-list",
            "helpText": "",
            "readOnly": false,
            "allowOther": false,
            "summaryField": false,
            "lookup": null,
            "lookupCondition": null,
            "lookupButton": null,
            "preventRunningOnInitialisation": null,
            "noResultsMessage": null,
            "tokenName": null,
            "listOfValues": [
              {
                "label": "Yes",
                "value": "yes"
              },
              {
                "label": "No",
                "value": "no"
              },
              {
                "label": "Don't know",
                "value": "unknown"
              }
            ],
            "displayName": "true",
            "outerClass": "",
            "labelClass": "",
            "inputClass": "",
            "width": "8",
            "selectLabel": "Select...",
            "allowMultiple": false,
            "enableFilter": false,
            "hideWhenBlank": false,
            "hidden": false,
            "disableEmptyValue": false,
            "displayCondition": null,
            "selectCondition": null,
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": true,
            "mandatoryMessage": "This field is required"
          },
          "conditionInputs": [],
          "id": "AF-Field-85761b00-69a5-429a-b1a4-21ceed15fd7a"
        },
        {
          "type": "select",
          "props": {
            "minimumChoices": null,
            "maximumChoices": null,
            "minimumChoicesMessage": "Please select at least _min_value_ choices",
            "maximumChoicesMessage": "Please select no more than _max_value_ choices",
            "label": "What time was this waste put out for collection?",
            "dataName": "timeOut",
            "labelPosition": "alignLeft",
            "defaultType": "specific",
            "defaultValue": null,
            "defaultValueText": null,
            "listSource": "one-time-list",
            "helpText": "",
            "readOnly": false,
            "allowOther": false,
            "summaryField": false,
            "lookup": null,
            "lookupCondition": null,
            "lookupButton": null,
            "preventRunningOnInitialisation": null,
            "noResultsMessage": null,
            "tokenName": null,
            "listOfValues": [
              {
                "label": "Before 6am",
                "value": "Before 6am"
              },
              {
                "label": "6 - 7am",
                "value": "6 - 7am"
              },
              {
                "label": "7 - 8am",
                "value": "7 - 8am"
              },
              {
                "label": "8 - 9am",
                "value": "8 - 9am"
              },
              {
                "label": "9 - 10am",
                "value": "9 - 10am"
              },
              {
                "label": "after 10am",
                "value": "after 10am"
              }
            ],
            "displayName": "true",
            "outerClass": "",
            "labelClass": "",
            "inputClass": "",
            "width": "8",
            "selectLabel": "Select...",
            "allowMultiple": false,
            "hideWhenBlank": false,
            "hidden": false,
            "enableFilter": false,
            "displayCondition": "",
            "selectCondition": null,
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": true,
            "mandatoryMessage": "This field is required",
            "disableEmptyValue": false
          },
          "id": "AF-Field-236ac5be-f198-4395-aea2-0ce3515c423a"
        },
        {
          "type": "radio",
          "props": {
            "label": "Was the waste left at the normal collection point?",
            "dataName": "usualPoint",
            "labelPosition": "alignLeft",
            "defaultType": "specific",
            "defaultValue": "",
            "defaultValueText": null,
            "listSource": "one-time-list",
            "helpText": "",
            "readOnly": false,
            "allowOther": false,
            "summaryField": false,
            "lookup": null,
            "lookupCondition": null,
            "lookupButton": null,
            "preventRunningOnInitialisation": null,
            "noResultsMessage": null,
            "tokenName": null,
            "listOfValues": [
              {
                "label": "Yes",
                "value": "yes"
              },
              {
                "label": "No",
                "value": "no"
              }
            ],
            "displayName": true,
            "outerClass": null,
            "labelClass": null,
            "inputClass": null,
            "width": null,
            "displayStyle": "horizontal",
            "styleAsButton": null,
            "hideWhenBlank": null,
            "hidden": null,
            "displayCondition": "",
            "selectCondition": "",
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": true,
            "mandatoryMessage": "This field is required"
          },
          "id": "AF-Field-48674e74-cff1-49c7-a92e-ca93a5ff2047"
        },
        {
          "type": "radio",
          "props": {
            "label": "Can you keep the waste until the next collection day?",
            "dataName": "canKeep",
            "labelPosition": "alignLeft",
            "defaultType": "specific",
            "defaultValue": "",
            "defaultValueText": null,
            "listSource": "one-time-list",
            "helpText": "",
            "readOnly": false,
            "allowOther": false,
            "summaryField": false,
            "lookup": null,
            "lookupCondition": null,
            "lookupButton": null,
            "preventRunningOnInitialisation": null,
            "noResultsMessage": null,
            "tokenName": null,
            "listOfValues": [
              {
                "label": "I can keep it until next collection",
                "value": "yes"
              },
              {
                "label": "Please return to collect the waste",
                "value": "no"
              }
            ],
            "displayName": "true",
            "outerClass": "",
            "labelClass": "",
            "inputClass": "",
            "width": "",
            "displayStyle": "vertical",
            "styleAsButton": false,
            "hideWhenBlank": false,
            "hidden": false,
            "displayCondition": "",
            "selectCondition": null,
            "weAdviseAgainstTheUseOfSelectConditions;PleaseUseDisplayConditionsInstead.": null,
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": true,
            "mandatoryMessage": "This field is required"
          },
          "conditionInputs": [],
          "id": "AF-Field-2342487f-8a61-4646-9119-f4739b77cb28"
        },
        {
          "type": "textarea",
          "props": {
            "label": "Not Straightforward",
            "dataName": "notStreight",
            "labelPosition": "alignLeft",
            "defaultValue": "concat({#RESVIEW},{#UL},\n           {#LI}, {dayOfWeek}, ' ', dateFormat({dateOfMissedCol}, 'dd/MM-yyyy'),\n           if({prevMissed}='yes',concat({#LI},'Previous Missed Collection'),''),\n           if({timeOut}!='Before 7am',concat({#LI},'Was put out ',{timeOut}),''),\n           if({usualPoint}='no',concat({#LI},'Was not put out in usual place'),''),\n           if({dateLast} <> {dateOfMissedCol}, if({dateLast} = '',\n\t\t\t\t\tconcat({#LI},'Collection date could not be found'),\n\t\t\t\t\tconcat({#LI},'Resident picked date that doesn', {SQ}, 't match system')),''),{#ULE},{#DE})",
            "helpText": "",
            "hidden": true,
            "readOnly": true,
            "summaryField": false,
            "displayName": true,
            "outerClass": null,
            "labelClass": null,
            "inputClass": null,
            "width": null,
            "lengthCount": null,
            "hideWhenBlank": null,
            "displayCondition": null,
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": false,
            "minimumLength": "",
            "maximumLength": "",
            "validationMask": "",
            "mandatoryMessage": "This field is required",
            "minimumLengthMessage": "Please input at least _min_value_ characters",
            "maximumLengthMessage": "Please input no more than _max_value_ characters",
            "validationMaskMessage": "Please input text of the format: _validation_mask_",
            "validationMaskMessageValue": "Select..."
          },
          "conditionInputs": [],
          "id": "AF-Field-91ea7604-ebba-4fb1-a099-6a81eb453f09"
        },
        {
          "type": "number",
          "props": {
            "label": "Need Checking",
            "dataName": "needCheck",
            "labelPosition": "alignLeft",
            "defaultValue": "if({prevMissed}='yes' \n    or ({timeOut}!='Before 6am' and {timeOut}!='') \n    or {usualPoint}='no'\n    or {dateOfMissedCol} < {oldDate}\n    or {dateLast} <> {dateOfMissedCol},1,0)",
            "helpText": "",
            "hidden": true,
            "readOnly": true,
            "summaryField": false,
            "displayName": true,
            "outerClass": null,
            "labelClass": null,
            "inputClass": null,
            "prefix": null,
            "suffix": null,
            "width": null,
            "decimalPlaces": null,
            "numberToText": null,
            "hideWhenBlank": null,
            "displayCondition": null,
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": false,
            "minimumValue": "",
            "maximumValue": "",
            "validationCondition": "",
            "mandatoryMessage": "This field is required",
            "minimumValueMessage": "Please input _min_value_ or more",
            "maximumValueMessage": "Please input _max_value_ or less",
            "validationConditionMessage": "This field is invalid"
          },
          "conditionInputs": [],
          "id": "AF-Field-292eef31-5377-4133-b56b-94ffac9e58c0"
        },
        {
          "type": "time",
          "props": {
            "label": "time now",
            "dataName": "timeNow",
            "labelPosition": "alignLeft",
            "defaultType": "current_time",
            "defaultValue": "{current_time}",
            "helpText": "",
            "hidden": true,
            "readOnly": true,
            "summaryField": false,
            "displayName": true,
            "outerClass": null,
            "labelClass": null,
            "inputClass": null,
            "width": null,
            "showSeconds": null,
            "hideWhenBlank": null,
            "displayCondition": null,
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": false,
            "minimumValue": "",
            "maximumValue": "",
            "timeFormat": "HH:mm",
            "mandatoryMessage": "This field is required",
            "minimumValueMessage": "Please input a time _min_value_ or later",
            "maximumValueMessage": "Please input a time _max_value_ or earlier",
            "timeFormatMessage": "Please input a time in the format _time_format_"
          },
          "conditionInputs": [],
          "id": "AF-Field-a081669f-8d4c-4ba6-a2c7-2e4a676813ed"
        },
        {
          "type": "text",
          "props": {
            "label": "check if within time or just reporting",
            "dataName": "checkIfWithinTime",
            "labelPosition": "alignAbove",
            "defaultValue": "{canKeep}",
            "helpText": "",
            "hidden": true,
            "readOnly": true,
            "summaryField": false,
            "displayName": true,
            "outerClass": null,
            "labelClass": null,
            "inputClass": null,
            "outputFormat": "normal",
            "currencyPrefix": null,
            "width": null,
            "inputMask": null,
            "inputMaskPlaceholder": null,
            "lengthCount": null,
            "hideWhenBlank": null,
            "displayCondition": "",
            "mandatoryCondition": null,
            "readonlyCondition": null,
            "mandatory": false,
            "minimumLength": "",
            "maximumLength": "",
            "validationCondition": "{dateOfMissedCol} >= {minDate} or {canKeep} = 'yes'",
            "validationMask": "",
            "mandatoryMessage": "This field is required",
            "minimumLengthMessage": "Please input at least _min_value_ characters",
            "maximumLengthMessage": "Please input no more than _max_value_ characters",
            "validationMaskMessage": "Please input text of the format: _validation_mask_",
            "validationConditionMessage": "Missed collections must be reported within 2 working days for us to return and collect the bin.",
            "validationMaskMessageValue": "Select..."
          },
          "id": "AF-Field-3e52af6f-09b7-410b-98ec-33113f7ffed1"
        }
      ]
    }
  ]
}
